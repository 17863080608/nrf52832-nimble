Import('rtconfig')
from building import *

cwd = GetCurrentDir()

path = [cwd,
    cwd + '/cmsis/include',
    cwd + '/nrfx',
    cwd + '/nrfx/drivers',
    cwd + '/nrfx/drivers/include',
    cwd + '/nrfx/drivers/src/prs',
    cwd + '/nrfx/hal',
    cwd + '/nrfx/mdk',
    cwd + '/nrfx/soc',
    cwd + '/nrfx/templates']

if GetDepend(['SOC_NRF51822_XXAC']):
    CPPDEFINES = ['NRF51']
    src = Split('''
        nrfx/mdk/arm_startup_nrf51.s
        nrfx/mdk/system_nrf51.c''')

src += Split('''
    nrfx/drivers/src/nrfx_adc.c
    nrfx/drivers/src/nrfx_clock.c
    nrfx/drivers/src/nrfx_gpiote.c
    nrfx/drivers/src/nrfx_power.c
    nrfx/drivers/src/nrfx_systick.c
    nrfx/drivers/src/nrfx_wdt.c

    nrfx/templates/nrfx_glue.c''')

group = DefineGroup('nordic', src, depend = [''], CPPPATH = path, CPPDEFINES = CPPDEFINES)

Return('group')
